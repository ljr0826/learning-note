# Cookie 与 Session

## cookie

登录信息是存放在浏览器上的

cookie 是浏览器里面的一个存放数据的东西

1. 如果我们用 js 的变量来存储数据，那么页面关闭的时候，数据就没了

2. 保持登陆状态是怎么做到的呢?

按照正常的 HTTP 协议是做不到的，因为 HTTP 协议也叫上下文无关协议

3. 所以前端页面上需要有一个持久化存储数据的东西，一旦登录成功就记载在里面。即 cookie

cookie 有域名限定的，自己只能在自己的域名下种 cookie

cookie 是存在浏览器中的，而不是页面上的，所以不同的页面能访问到相同的 cookie

cookie 是可以长期存储的

cookie 即使是保存在浏览器里面，也是存放在不同的域名下的；不同的 cookie 存在不同的域名里

1. 初始状态：没有登录
2. 访问百度的登录，输入用户名，密码
3. 若用户名和密码是正确的，百度的后端会向这个域名下设置一个 cookie。（若注册过百度账号，每个用户都会有一个 ID。）登录成功的话会在 cookie 里写一个 ID，基本是写入用户的基本信息（加密的）
4. 以后每一次向百度发送请求，浏览器都会自动带上这些 cookie
5. 服务端/后端看到了带有 ID 的 cookie，就会解析这个加密的 ID。来获取到这个用户本身的 ID
6. 如果能获取到本身的 ID，那么就证明这个用户已经登录过了。所以后端就可以继续保留用户的信息

> 自动登录/登录状态的保存通常是 cookie 来做的

缺点：如果某个坏人复制了我浏览器中的 cookie，那么他就可以在他的电脑上登录我的账号

## Session

将登录信息存放在服务器端。会比较安全但是会比较耗费资源

缺点：如果用户量非常大，服务器端是很耗费资源的；因为后端可能不止一台服务器，用户的登录信息一般只存在一台服务器上；因为用户的登录操作在那台机器上执行的就一般存在那台机器上。需要通过反向代理（有两种方式轮询，IP 哈希）；还有很多缺点及其解决方法

即 cookie 是存在客户端的，每次请求都会向后端发送的，不会因为页面关闭而消失的；session 是存在服务器端的

xss 注入攻击就是攻击你的 cookie 的
