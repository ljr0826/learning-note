# proxy应用-观察者模式

观察者模式：
- 有一个对象是观察者，它用于观察另外一个对象的属性值的变化
- 当另一个对象的属性值发生变化后，会收到一个通知，可能会做一些事

没有学习代理之前。可以使用Object.defineProperty来实现这个功能

```js
const div = document.getElementById("container");
//创建一个观察者（也可以叫代理）target表示目标对象
//实现：观察目标对象里面的属性变化，显示到页面的p元素内部
function observer(target) {
  const proxy = new Proxy(target, {
    set(target, prop, value) {
      Reflect.set(target, prop, value);
      render();
    },
    get(target, prop) {
      return Reflect.get(target, prop);
    },
  });
  render();
  function render() {
    let html = "";
    for (const prop of Object.keys(target)) {
      html += `      <p>
        <span>${prop}：</span>
        <span>${target[prop]}</span>
      </p>`;
    }
    div.innerHTML = html;
  }
  return proxy; //返回观察者对象
}
const target = {
  a: 1,
  b: 2,
};
const obj = observer(target); //以后修改对象不修改target目标对象，而是修改观察者obj
obj.a = 10;
target.c = 3;
console.log(target, obj);
console.log(target === obj);
```