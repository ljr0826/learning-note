# 【回顾】属性描述符

Property Descriptor 属性描述符是一个普通对象，用于描述一个属性的相关信息。

通过`Object.getOwnPropertyDescriptor(对象,属性名)`可以得到一个对象的某个属性的属性描述符

通过```Object.getOwnPropertyDescriptors(对象)```：可以得到某个对象的所有属性描述符

```js
const obj = {
  a: 1,
  b: 2,
};
const desc = Object.getOwnPropertyDescriptor(obj, "a");
```

属性描述符对象里面有如下属性：
- value：属性值
- configurable：该属性的描述符是否可以修改
- enumerable：该属性是否可以被枚举（就是可以被拿出来看，for-in循环能够得到）
- writable：该属性是否可以被重新赋值

如果需要为某个对象添加属性或修改属性时，配置其属性描述符，可以使用下面的代码：

```js
Object.defineProperty(对象, 属性名, 描述符);
Object.defineProperties(对象, 多个属性的描述符);
```

例：

```js
Object.defineProperty(obj, "a", {
  value: 3,
  configurable: false, //设置为false后。后面在更改属性描述符会报错，即这个属性不能再使用defindProperty了
  enumerable: false, //设置为false后。这个属性for-in循环不出来。Object.keys(obj)和Object.values(obj)也得不到
  writable: false, //设置为false后。这个属性变成只读属性。不能通过obj.a修改
});

Object.defineProperties(obj, {
  a: {
    value: 3,
    configurable: false,
    enumerable: false,
    writable: false,
  },
  b: {
    value: 0,
    configurable: false,
    enumerable: true,
    writable: false,
  },
});
```

我们平时使用属性描述符的话，主要也不是配置以上这些属性。属性描述符里面有两个特殊的配置，这两个配置会极大的影响属性本身的运作原理

## 存取器属性

属性描述符中，如果配置了 get 和 set 中的任何一个；则该属性，不再是一个普通属性，而变成了存取器属性。

get 和 set 配置均为函数，如果一个属性是存取器属性，则读取该属性时，会运行 get 方法，将 get 方法得到的返回值作为属性值；如果给该属性赋值，则会运行 set 方法。

> 存取器属性最大的意义，在于可以控制属性的读取和赋值
> 不能和 value、writable 共存（因为value本身表示内存空间里面的数据。而存取器属性没有内存空间存储数据）会报错

```js
const obj = {
  b: 2,
};
Object.defineProperty(obj, "a", {
  get() {
    console.log("运行了属性a的get函数");
    // return obj.a;//这样会无限递归-报错
    return obj._a;
  },
  set(val) {
    //set方法是有一个参数的
    console.log("运行了属性a的set函数", val);
    obj._a = val; //因为存取器属性没有内存空间，利用一个内存空间帮助我们存放一下数据
  },
}); //存取器属性的属性值不是放到内存空间里面的。没有专门的内存空间放数据
//当读取属性a的时候，运行get函数；给属性a赋值的时候，运行set函数
obj.a = 20; //相当于set(20)
console.log(obj.a); //相当于console.log(get())
//存取器属性最大的意义就是：对该属性的赋值、读取都会收到函数的控制
```

相当于类class里面的get和set

```js
function HTMLSpanElement() {
  Object.defineProperty(this, "innerHTML", {
    get() {
      //获取页面窗口中对应的元素的内容
    },
    set() {
      //重新渲染页面窗口
    },
  });
} //dom对象中的属性innerHTML是存取器属性，因为读取和设置时可以知道它什么时候被更改了
//底层的知识
```