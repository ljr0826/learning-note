# 声明变量的问题

简单且实用的一个知识点。

以前使用 var 声明变量的问题：

1. 允许重复的变量声明：导致数据被覆盖

```js
var a = 1;
function print() {
  console.log(a); //2
}
//假设这里有1000行代码。重复的变量声明对实际的代码意图可能造成影响
//最理想的情况是重复声明变量会报错
var a = 2;
print();
```

2. 变量提升：怪异的数据访问、闭包问题

```js
if (Math.random() < 0.5) {
  var a = "abc"; //变量提升导致怪异的数据访问
  console.log(a);
} else {
  console.log(a);
}
console.log(a);

//闭包问题
var div = document.getElementById("divButtons");
for (var i = 1; i <= 10; i++) {
  var btn = document.createElement("button");
  btn.innerHTML = "按钮" + i;
  div.appendChild(btn);
  // btn.onclick = function (e) {
  //   console.log(i);
  // }; //循环结束后i等于11
  (function (i) {
    btn.onclick = function (e) {
      console.log(i);
    };
  })(i); //解决方法
}
```

3. 全局变量挂载到全局对象window：全局对象成员污染问题

```js
var abc = "123";
console.log(window.abc); //window里面挂载的对象越来越多，导致全局变量污染
// var name = "abc";
console.log(window.name); //""，表示窗口的名称
```

> 为了js大型项目的开发，必须要解决变量声明的问题