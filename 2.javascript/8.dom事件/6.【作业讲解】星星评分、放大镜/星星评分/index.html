<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>星星评分</title>
    <style>
      .left {
        float: left;
        margin-left: 10px;
        line-height: 30px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div id="divstars" class="left">
      <img src="images/empty.png" alt="" />
      <img src="images/empty.png" alt="" />
      <img src="images/empty.png" alt="" />
      <img src="images/empty.png" alt="" />
      <img src="images/empty.png" alt="" />
    </div>
    <div id="divword" class="left"></div>
    <script>
      var wordArr = ["满意", "一般满意", "还不错", "很满意", "非常满意"];
      var divstars = document.getElementById("divstars");
      var divword = document.getElementById("divword");
      var clickIndex = -1;
      Array.from(divstars.children).forEach((item, i) => {
        item.onclick = item.onmouseenter = function (e) {
          divword.innerHTML = wordArr[i];
          changeShin(i);
          if (e.type === "click") {
            clickIndex = i;
          }
        };
        item.onmouseleave = function (e) {
          divword.innerHTML = wordArr[clickIndex] ? wordArr[clickIndex] : "";
          // divword.innerHTML = wordArr[clickIndex] || "";
          changeShin(clickIndex);
        };
      });
      /**
       * 以某下标为临界点更改星星的亮度
       */
      function changeShin(tempIndex) {
        for (var j = 0; j < divstars.children.length; j++) {
          if (j <= tempIndex) {
            divstars.children[j].src = "images/shining.png";
          } else {
            divstars.children[j].src = "images/empty.png";
          }
        }
      }
    </script>
  </body>
</html>
