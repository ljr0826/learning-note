# html5属性篇

1. 内容大纲
之前学的都是h4，h5是html的第5代

h5要分三大方面来学习：
- 新增的属性、（placeholder、calendar、date、time、email、url、search、contenteditable、draggable、hidden、context-menu、data-val自定义属性）
- 新增的元素、（语义化元素类似于div的元素、canvas画板、svg、audio声音播放、video视频播放）
- 新增的api（手机app里面的页面都叫做h5，h5一般是移动端开发也是手机端多出来的功能。新增的api：gps定位(需要地理位置的功能)、重力感应(手机里需要有陀螺仪检测平衡用的)、request-animation-frame(动画优化)、History浏览历史（控制当前页面的历史记录）、LocalStorage、SessionStorage(存储信息，比如历史最高纪录)、WebSocket（类似一种请求，例如聊天室，在线聊天等通讯的功能）、FileReader（文件读取，预览）、WebWorker（文件的异步，主要提升性能、提升交互体验）、Fetch（传说中能替代ajax的东西，因为到现在为止用的公司还不多）

正是因为这些新的功能的出现，前端更加强大
h5的video出来之后flash即将淘汰

2. placeholder属性，一般用于表单提示信息
   1. input元素的新type：实际没大用，因为很多浏览器都不支持，知道了解就好实际生产中不用
   2. contenteditable属性：该属性默认值是false，改成true后元素内容可修改。没有兼容性问题
      1. 一般用于可以修改的表格
      2. 该属性可以被继承！，子元素能继承到父元素上的该属性
      3. 可以更改子元素上的该属性为false，但是子元素能够整体被删除。所以不要这样玩
   3. draggable属性：可拖拽的。chrome和safari可以正常使用，有兼容性问题
      1. 该属性在a元素和img元素上默认值为true。能拖拽即是有拖拽事件
      2. 拖拽的生命周期：按下(拖拽开始)----移动的过程(拖拽进行中)----松开手(拖拽结束)
      3. 拖拽的组成：被拖拽的物体（dragstart事件、drag事件、dragend事件），目标区域(也叫目标元素。dragenter、dragover、dragleave、drop)
      4. 从一个地方拽到另一个地方，要有初始的地方，结束的位置
   4. 补充两个属性。兼容性不好
      1. dragstart事件上的e.dataTransfer.effectAllowed属性
      2. drop事件上的e.dataTransfer.dropEffect属性
      3. 这两个属性值对应要一致


```js
//研究被拖拽的物体
var aDrag = document.querySelector(".a");
var beginX = 0,
  beginY = 0;
aDrag.ondragstart = function (e) {
  beginX = e.clientX;
  beginY = e.clientY;
}; //按下的瞬间不会触发该事件，需要移动哪怕一点点
//   aDrag.ondrag = function (e) {
//     console.log(e);
//   }; //移动事件。移动的一瞬间无限次触发
aDrag.ondragend = function (e) {
  var x = e.clientX - beginX;
  var y = e.clientY - beginY;
  aDrag.style.left = aDrag.offsetLeft + x + "px";
  aDrag.style.top = aDrag.offsetTop + y + "px";
}; //拖拽结束事件
//clientX和clientY的属性表示位置
```

```js
//研究目标区域
var _a = document.querySelector(".a");
var _b = document.querySelector(".b");
_a.ondragstart = function (e) {
  console.log(e.dataTransfer);
  e.dataTransfer.effectAllowed = "link"; //link copy move copyMove linkMove all
}; //拖拽开始。只有dragstart事件上有dataTransfer方法上的effectAllowed属性
_a.ondrag = function (e) {};
_a.ondragend = function (e) {
  console.log("dragend");
}; //拖拽结束
_b.ondragenter = function (e) {}; //不是元素的图形进入时触发，而是鼠标进入时触发该事件
_b.ondragover = function (e) {
  e.preventDefault(); //必须在此阶段阻止默认事件才能实现触发drop事件
}; //鼠标一旦进入目标区域并在目标区域中移动该事件就会一直触发
_b.ondragleave = function (e) {};
_b.ondrop = function (e) {
  e.dataTransfer.dropEffect = "link"; //只有drop事件上有dataTransfer方法上的dropEffect属性
  console.log("drop");
}; //当在目标区域放置拖拽元素的时候触发该事件
//所有html元素当拖拽周期结束的时候，他的默认事件都是回到原处。
//事件是由行为触发的，但是，一个行为可以不止触发一个事件
//dragover----->回到原处/执行drop事件。默认的永远是回到原处
```

```js
//draggable属性涉及事件练习
var box1 = document.querySelector(".box1");
var box2 = document.querySelector(".box2");
var lis = document.querySelectorAll("li");
var moveDom;
lis.forEach((li) => {
  li.setAttribute("draggable", true);
  li.addEventListener("dragstart", function () {
    moveDom = li;
  });
});
box1.addEventListener("dragover", function (e) {
  e.preventDefault();
});
box2.addEventListener("dragover", function (e) {
  e.preventDefault();
});
box1.addEventListener("drop", function (e) {
  this.appendChild(moveDom);
  moveDom = null;
});
box2.addEventListener("drop", function (e) {
  this.appendChild(moveDom);
  moveDom = null;
});
```