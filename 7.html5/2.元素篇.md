# html5新增元素篇

## 语义化元素

```html
<!--以下元素在特点上和div没有差别，只是含义不同。均为文档快元素-->
<header></header>
<!--头部区域-->
<footer></footer>
<!--底部区域-->
<nav></nav>
<!--导航条-->
<article></article>
<!--文章，常常可以直接被引用拿走-->
<section></section>
<!--常放在artical的里面，表示段落。但是artical和section在实际使用中没有那么较真-->
<aside></aside>
<!--正文旁边的东西，表示侧边栏或管理系统侧边的菜单栏-->
```

## canvas画线

canvas元素：就是一个画布，我们可以在上面画画（工作中偶尔做动画会用到）
    用js来操作这个元素画东西
    画线要有一个起点一个终点

1. convasDom.getContext()：该方法返回一个用于在画布上绘图的环境。传递参数"2d"
   1. ctx.moveTo、ctx.lineTo、ctx.fill、ctx.closePath、ctx.beginPath、ctx.stroke画线、ctx.lineWidth、

```html
<canvas width="500px" height="300px"></canvas><!--width和height分别表示画板的宽高-->
<script>
  var cas = document.querySelector("canvas");
  var ctx = cas.getContext("2d");
  ctx.lineWidth = 10;//声明线的宽度
  ctx.moveTo(100, 100);//起点
  ctx.lineTo(200, 100);
  ctx.lineTo(200, 200);
  ctx.closePath();//将当前线路闭合
  // ctx.fill();//填充成实心的图案
  ctx.stroke();//描绘出来你的线路
  ctx.beginPath();//重新开启一个线路
</script>
```

2. 用canvas画矩形
   1. ctx.rect(起点横坐标,起点纵坐标,矩形宽度,矩形高度)单纯表示线路，需要stroke一下
   2. ctx.strokeRect(1,2,3,4)
   3. ctx.fillRect(1,2,3,4)实心矩形
   4. ctx.clearRect(1，2，3，4)清除矩形区域的画线图形

```js
var cas = document.querySelector("canvas");
var ctx = cas.getContext("2d");
// ctx.rect(100, 100, 200, 100); //四个参数分别表示起点的横纵坐标、宽、高。方法一单纯表示线路
// ctx.fill();
// ctx.stroke();

// ctx.strokeRect(100, 100, 200, 100);//方法二
ctx.fillRect(100, 100, 200, 100);//方法三

var _h = 100,//小方块下落反弹练习
  num = 5;
var timer = setInterval(function () {
  ctx.clearRect(0, 0, 500, 300);
  ctx.strokeRect(100, _h, 50, 50);
  if (_h > 300 - 50 || _h < 0) {
    num = -num;
  }
  _h += num;
}, 1000 / 30);
```

3. 用canvas画圆形或弧形或扇形
   1. 画圆的要素：圆心(x|y)、半径(r)、弧度(起始弧度\结束弧度)、方向(顺时针0false默认\逆时针1true)
   2. ctx.arc()

```js
ctx.arc(100, 100, 50, 0, Math.PI * 1.7, 0);
ctx.lineTo(100, 100);
ctx.closePath();
ctx.stroke();
```

4. 用canvas画圆角矩形
   1. ctx.arcTo(圆弧点,目标方向点,弧度)

```js
ctx.moveTo(100, 110); //起点A点。记得把圆角的那个10px让出来
ctx.arcTo(100, 200, 200, 200, 10); //B点、C点(只是为了帮助你提供一个方向，没有实际展示出来的线段)、圆角的大小(单位像素)
ctx.arcTo(200, 200, 200, 100, 10);
ctx.arcTo(200, 100, 100, 100, 10);
ctx.arcTo(100, 100, 100, 200, 10);
ctx.stroke();
```

5. 用canvas画贝塞尔曲线
   1. ctx.quadraticCurveTo(200,200,300,300)
   2. ctx.bezierCurveTo(200,200,300,100,400,200)

```js
ctx.quadraticCurveTo(200, 200, 300, 100); //二次贝塞尔曲线
ctx.bezierCurveTo(200, 200, 300, 100, 400, 200); //三次贝塞尔曲线
```

6. canvas的平移translate、旋转rotate、缩放scale。对全局线路都起作用
   1. ctx.translate()
   2. ctx.rotate(Math.PI/6)
   3. ctx.scale(2,2)
   4. ctx.save();存储当前的平移以及旋转、缩放数据状态
   5. ctx.restore();还原当前的平移和旋转、缩放状态

```js
ctx.save();//存储平移、旋转、缩放的数据状态
ctx.beginPath();
ctx.translate(100, 100); //坐标系平移，即画布的左上角位置也发生变化
ctx.rotate(Math.PI / 6); //表示旋转的角度。默认根据画布的左上角旋转
ctx.moveTo(0, 0);
ctx.lineTo(100, 0);
ctx.stroke();

ctx.beginPath();
ctx.restore();//还原平移、旋转、缩放的数据状态
ctx.scale(2,2);//缩放
ctx.strokeRect(100,100,100,100);
```

7. 矩形内容的填充
   1. ctx.createPattern(img,"no-repeat")
   2. ctx.fillStyle = "red"

```js
var img = new Image();
img.src = "img.jpg";
img.onload = function () {
  ctx.beginPath();
  var bg = ctx.createPattern(img, "no-repeat");
  ctx.fillStyle = bg; //填充图案是根据坐标原点进行填充的
//   ctx.fillStyle = "#008c8c";//颜色填充
  ctx.fillRect(100, 100, 200, 100);
};
```

8. 线性渐变：两个点，从一个点到另一个点的方向进行渐变
   1. ctx.createLinearGradient(点，点)
   2. bd.addColorStop(0,"red")

```js
ctx.beginPath();
ctx.translate(100, 100);
var bg = ctx.createLinearGradient(0, 0, 200, 200); //线性渐变。给两个点的坐标(起点依然是坐标系的起点而不是矩形的起点)
bg.addColorStop(0, "white");
bg.addColorStop(0.5, "yellow");
bg.addColorStop(1, "black");
ctx.fillStyle = bg;
ctx.fillRect(0, 0, 200, 200);
```

9. 辐射渐变：6个参数
   1.  var bg = ctx.createRadialGradient(20, 20, 20, 100, 100, 60); //六个参数，坐标+半径）*2

```js
      ctx.beginPath();
      var bg = ctx.createRadialGradient(20, 20, 20, 100, 100, 60); //六个参数，坐标+半径）*2
      //起始圆里面的颜色全是起始的颜色
      bg.addColorStop(0, "red");
      bg.addColorStop(0.5, "green");
      bg.addColorStop(1, "blue");
      // ctx.fillRect(0, 0, 200, 200);
      ctx.arc(100, 100, 100, 0, Math.PI * 2, 1);
      ctx.fillStyle = bg;
      ctx.stroke();
      ctx.fill();
```

10. canvas的阴影和渲染文字
    1.  ctx.shadowColor|ctx.shadowBlur|ctx.shadowOffsetX|ctx.shadowOffsetY
    2.  ctx.fillText("wenz99",100,100)文字填充
    3.  ctx.strokeText("fds",100,120)文字描边

```js
ctx.beginPath();
ctx.shadowColor = "blue"; //阴影颜色
ctx.shadowBlur = 10; //阴影宽度
ctx.shadowOffsetX = 20; //阴影横向偏移量
ctx.shadowOffsetY = 30;
ctx.strokeRect(0, 0, 200, 200);

ctx.fillStyle = "red";
ctx.font = "30px Georgia";
ctx.fillText("顾昀", 100, 100); //文字填充
ctx.strokeText("长庚", 100, 150); //文字描边
```

11. canvas线端样式

```js
//canvas的线端样式
ctx.lineWidth = 15;
ctx.moveTo(100, 100);
ctx.lineTo(200, 100);
ctx.lineCap = "round"; //square前后多加一个小方块、butt原来的样式、round两边多加变圆
ctx.lineTo(100, 150);
ctx.lineJoin = "round"; //bevel将尖砍掉、默认miter锋锐的（可设置miterLImit）、round圆头
ctx.miterLimit = 5;
ctx.stroke();
```

## svg元素

canvas和svg都是h5里面重要的画图工具

区别：
- svg：矢量图，放大不会失真。适合大面积的贴图。通常动画较少/较简单。用元素和css去画图
- canvas：所有动画都是拿js去画计算机去算的，适合用于小面积的绘图，适合动画

svg具体特点可见袁老师css进阶课svg

1. svg画线和矩形
   1. line元素和rect元素。属性rx、ry。配合css样式stroke和stroke-width画样式
   2. 所有闭合的图形在svg中默认都是天生充满并且画出来的。rx、ry分别表示x、y方向上的圆角

```html
<svg width="500px" height="300px" style="border: 1px solid #008c8c">
  <line
    x1="100"
    y1="100"
    x2="200"
    y2="100"
    style="stroke: black; stroke-width: 3px"
  ></line>
  <line
    x1="200"
    y1="100"
    x2="200"
    y2="200"
    style="stroke: red; stroke-width: 5px"
  ></line>
  <rect width="100" height="50" x="0" y="0" rx="10" ry="20"></rect>
  <!--所有闭合的图形在svg中默认都是天生充满并且画出来的。rx、ry分别表示x、y方向上的圆角-->
</svg>
```

2. svg画圆、椭圆、直线
   1. 画圆重点：圆心、半径
   2. fill:transparent;填充为空

```html
<circle
  r="50"
  cx="50"
  cy="220"
  style="fill: transparent; stroke: red"
></circle>
<ellipse rx="100" ry="30" cx="400" cy="200"></ellipse>
<polyline
  points="0 0,50 50,50 100,100 100,100 50"
  style="fill: transparent; stroke: blue; stroke-width: 3px"
></polyline>
```

3. svg画多边形和文本
   1. polygon画多边形，首尾会连接上；polyline画折线，画到那算那

```html
<polygon
  style="fill: transparent; stroke: teal"
  points="0 0,50 50,50 100,100 100,100 50"
></polygon>
<text x="10" y="50" style="stroke: teal; stroke-width: 1px">
  我想有一天国家昌明，百姓人人有事可做； 我的将军，不必死守边关。
</text>
```

4. svg元素的透明度和线条样式
   1. stroke-opacity样式
   2. fill-opacity样式
   3. stroke-linecap样式（线段两头的样式）：取值square前后多加一个小方块、butt原来的样式、round两边多加变圆
   4. stroke-linejoin样式（线段拐角的样式）：取值bevel将尖砍掉、默认miter锋锐的（可设置miterLImit）、round圆头

```html
<polyline
  points="0 0,50 50,50 100,100 100,100 50"
  style="
    stroke: blue;
    stroke-width: 3px;
    stroke-opacity: 0.5;
    fill-opacity: 0.3;
    stroke-linecap: round;
    stroke-linejoin: bevel;
  "
></polyline>
```

5. svg的path子元素
   1. 大写字母表示绝对位置，小写字母表示相对位置（基于当前点移动）
   2. Z不区分大小写，表示闭合区间。H表示横向移动、V表示纵向移动。

```html
<!-- <path
  d="M 100 100 L 200 100 l 100 100"
  style="stroke: teal; fill: transparent"
></path> -->
<path
  d="M 100 100 H 200 V 200 Z"
  style="stroke: teal; fill: transparent"
></path>
```

6. path画弧

```html
<path d="M250 50 A100 100 0 0 1 250 250 A100 100 0 0 0 250 450 A200 200 0 0 0 250 50" fill="#fff" />
```

7. svg线性渐变
   1. 从某一个位置到另一个位置的渐变
   2. svg上的渐变都要先定义一个元素

```html
<defs>
  <linearGradient id="bg1" x1="0" y1="0" x2="0" y2="100%">
    <stop offset="0%" style="stop-color: yellow"></stop>
    <stop offset="100%" style="stop-color: violet"></stop>
  </linearGradient>
</defs>
<rect
  x="100"
  y="100"
  height="100"
  width="200"
  style="fill: url(#bg1)"
></rect>
```

8. svg高斯模糊（也叫高斯滤镜）
   1. filter元素：思路是求平均数，让每一个点都借鉴一下附近的点的颜色求平均
   2. stdDeviation="20"，属性值越大越模糊

```html
<svg width="500px" height="300px" style="border: 1px solid #008c8c">
  <defs>
    <linearGradient id="bg1" x1="0" y1="0" x2="0" y2="100%">
      <stop offset="0%" style="stop-color: yellow"></stop>
      <stop offset="100%" style="stop-color: violet"></stop>
    </linearGradient>
    <filter id="Gaussian">
      <feGaussianBlur in="SourceGraphic" stdDeviation="20"></feGaussianBlur>
    </filter>
  </defs>

  <rect
    x="100"
    y="100"
    height="100"
    width="200"
    style="fill: url(#bg1); filter: url(#Gaussian)"
  ></rect>
</svg>
```

9. svg虚线及简单动画
   1.  css样式stroke-dasharray:"10px 20px"，每一个填充区都是一个目标，交替使用改属性值。图案按照数组的形式交替循环出现
   2.  stroke-dashoffset:"10px"; 偏移量
   3.  动画animation:move 2s linear infinite alternate-reverse;
   4.  @keyframes move{0%{stroke-dashoffset:200px;}100%{stroke-dashoffset:10px;}}
10. svg的viewbox（比例尺）
    1.  svg常用在地图：特点大、基本没有动画、所以不适合canvas、矢量图、放大缩小按照一定比例
    2.  viewBox属性

```html
<svg
  width="500px"
  height="300px"
  viewBox="0,0,250,150"
  style="border: 1px solid #008c8c"
>
  <rect height="50" width="100" x="0" y="0"></rect>
</svg>
```

## audio音频元素和video视频元素

只有http协议响应中带有Content-Range：bytes....这个属性，音频才能实现跳转播放

```css
      * {
        padding: 0;
        margin: 0;
      }
      .video_player {
        position: relative;
        margin: 0px auto;
        width: 300px;
        height: 500px;
        font-size: 8px;
      }
      video {
        position: absolute;
        left: 0px;
        top: 0px;
        width: 300px;
        height: 500px;
      }
      .menu {
        position: absolute;
        width: 100%;
        height: 20px;
        background-color: rgba(0, 0, 0, 0.5);
        bottom: 0px;
        display: none;
      }
      .play {
        position: absolute;
        width: 30px;
        height: 12px;
        border: 1px solid white;
        text-align: center;
        line-height: 12px;
        color: white;
        border-radius: 10px;
        margin-left: 3px;
        top: 50%;
        margin-top: -6px;
        cursor: pointer;
      }
      .time {
        position: absolute;
        width: 60px;
        height: 12px;
        text-align: center;
        line-height: 12px;
        color: white;
        border-radius: 10px;
        margin-left: 40px;
        top: 50%;
        margin-top: -6px;
        cursor: pointer;
      }
      .progress_bar {
        position: absolute;
        width: 100%;
        height: 2px;
        background: white;
        left: 0px;
        top: -2px;
      }
      .progress_bar div {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 120px;
        height: 2px;
        background-color: orange;
      }
      .progress_bar i {
        position: absolute;
        height: 6px;
        width: 6px;
        background-color: orange;
        border-radius: 50%;
        left: 120px;
        top: -2px;
        cursor: pointer;
      }
      .quick {
        position: absolute;
        width: 40px;
        height: 12px;
        border: 1px solid white;
        text-align: center;
        line-height: 12px;
        color: white;
        border-radius: 10px;
        left: 150px;
        top: 50%;
        margin-top: -6px;
        cursor: pointer;
      }
      .quick_list {
        position: absolute;
        width: 50px;
        height: 100px;
        background: rgba(0, 0, 0, 0.5);
        left: 200px;
        top: -100px;
        color: white;
        text-align: center;
        display: none;
      }
      .quick_list li {
        position: relative;
        height: 20px;
        width: 50px;
        line-height: 20px;
        list-style-type: none;
        cursor: pointer;
      }
      .quick_list li:hover {
        color: green;
      }
      .vol_add,
      .vol_ins {
        position: absolute;
        width: 20px;
        height: 12px;
        border: 1px solid white;
        text-align: center;
        line-height: 12px;
        color: white;
        border-radius: 10px;
        top: 50%;
        margin-top: -6px;
        cursor: pointer;
      }
      .vol_add {
        left: 200px;
      }
      .vol_ins {
        left: 222px;
      }
      .full_screen {
        position: absolute;
        left: 250px;
        width: 40px;
        height: 12px;
        border: 1px solid white;
        text-align: center;
        line-height: 12px;
        color: white;
        border-radius: 10px;
        top: 50%;
        margin-top: -6px;
        cursor: pointer;
      }
```

```html
    <div class="video_player">
      <video src="media/video.mp4"></video>
      <div class="menu">
        <div class="play">播放</div>
        <div class="time">0:00/0:00</div>
        <div class="progress_bar">
          <div></div>
          <i></i>
        </div>
        <div class="quick">倍速</div>
        <div class="quick_list">
          <ul>
            <li>x0.50</li>
            <li>x0.75</li>
            <li>x1.00</li>
            <li>x1.50</li>
            <li>x2.00</li>
          </ul>
        </div>
        <div class="vol_add">+</div>
        <div class="vol_ins">-</div>
        <div class="full_screen">全屏</div>
      </div>
    </div>
    <script>
      //原生的控件不好看，基本上自己写控件(控制条)，即基本上不用control
      var videoPlayer = document.querySelector(".video_player");
      var video = videoPlayer.querySelector("video");
      var menu = document.querySelector(".menu");
      var play = document.querySelector(".play");
      var time = document.querySelector(".time");
      var progressBar = document.querySelector(".progress_bar");
      var quick = document.querySelector(".quick");
      var quickList = document.querySelector(".quick_list");
      var volAdd = document.querySelector(".vol_add");
      var volIns = document.querySelector(".vol_ins");
      var fullScreen = document.querySelector(".full_screen");
      videoPlayer.onmouseenter = function (e) {
        menu.style.display = "block";
      };
      videoPlayer.onmouseleave = function (e) {
        menu.style.display = "none";
      };
      play.onclick = function () {
        if (video.paused) {
          video.play();
          play.innerHTML = "暂停";
        } else {
          video.pause();
          play.innerHTML = "播放";
        }
      };
      progressBar.onmouseenter = function (e) {
        progressBar.style.height = "14px";
        progressBar.style.top = "-16px";
        progressBar.querySelector("div").style.height = "14px";
        progressBar.querySelector("i").style.height = "18px";
      };
      progressBar.onmouseleave = function (e) {
        progressBar.style.height = "2px";
        progressBar.style.top = "-2px";
        progressBar.querySelector("div").style.height = "2px";
        progressBar.querySelector("i").style.height = "6px";
      };
      progressBar.onclick = function (e) {
        //实现跳转
        var location = e.layerX; //获取点击的位置
        var width = progressBar.clientWidth;
        var targetTime = (location / width) * video.duration;
        video.currentTime = targetTime;
      };
      quick.onclick = function () {
        quickList.style.display = "block";
      };
      quick.onclick = function () {
        quickList.style.display = "block";
      };
      quickList.onmouseleave = function () {
        quickList.style.display = "none";
      };
      var liList = quickList.querySelectorAll("li");

      liList.forEach((item, index) => {
        item.onclick = function () {
          if (index === 0) {
            //0.5倍速（怎么调节速度呢
            video.playbackRate = 0.5; //该属性表示视频速率
            quick.innerHTML = "x0.50";
          } else if (index === 1) {
            //0.75倍速
            video.playbackRate = 1;
            quick.innerHTML = "x0.75";
          } else if (index === 2) {
            //1倍速
            video.playbackRate = 1;
            quick.innerHTML = "倍速";
          } else if (index === 3) {
            //1.5倍速
            video.playbackRate = 1.5;
            quick.innerHTML = "x1.50";
          } else if (index === 4) {
            //2倍速
            video.playbackRate = 2;
            quick.innerHTML = "x2.00";
          }
        };
      });

      volAdd.onclick = function (e) {
        video.volume = video.volume + 0.1 > 1 ? 1 : video.volume + 0.1;
      };
      volIns.onclick = function (e) {
        video.volume = video.volume - 0.1 < 0 ? 0 : video.volume - 0.1;
      };

      fullScreen.onclick = function () {
        var dom = document.documentElement;
        dom.requestFullscreen();
        videoPlayer.style.width = window.screen.width + "px";
        videoPlayer.style.height = window.screen.height + "px";
        video.style.width = window.screen.width + "px";
        video.style.height = window.screen.height + "px";
      };
      setInterval(function () {
        var total = video.duration; //单位秒
        var nowTime = video.currentTime; //当前时间
        time.innerHTML =
          parseInt(nowTime / 60) +
          ":" +
          String(parseInt(nowTime % 60)).padStart(2, 0) +
          "/" +
          parseInt(total / 60) +
          ":" +
          parseInt(total % 60);
        var width = (nowTime / total) * progressBar.clientWidth;
        progressBar.querySelector("div").style.width = width + "px";
        progressBar.querySelector("i").style.left = width + "px";
      }, 1000);
    </script>
```